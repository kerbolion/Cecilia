<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cotizador de Eventos GastronÃ³micos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ½ï¸ Cotizador de Eventos</h1>
            <p>GestiÃ³n integral de productos y cotizaciones gastronÃ³micas</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showTab('productos')">ğŸ“¦ Productos</button>
            <button class="tab" onclick="showTab('cotizador')">ğŸ’° Cotizador</button>
            <button class="tab" onclick="showTab('historial')">ğŸ“‹ Historial</button>
        </div>

        <!-- TAB PRODUCTOS -->
        <div id="productos" class="tab-content active">
            <h2>GestiÃ³n de Productos</h2>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="nombreProducto">Nombre del Producto:</label>
                    <input type="text" id="nombreProducto" placeholder="Ej: Entrada de salmÃ³n">
                </div>
                <div class="form-group">
                    <label for="categoriaProducto">CategorÃ­a:</label>
                    <select id="categoriaProducto">
                        <!-- Las categorÃ­as se cargarÃ¡n dinÃ¡micamente -->
                    </select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="costoProducto">Costo ($):</label>
                    <input type="number" id="costoProducto" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label for="precioProducto">Precio Final ($):</label>
                    <input type="number" id="precioProducto" step="0.01" placeholder="0.00">
                </div>
            </div>

            <div class="form-group">
                <label for="descripcionProducto">DescripciÃ³n:</label>
                <textarea id="descripcionProducto" rows="3" placeholder="DescripciÃ³n del producto..."></textarea>
            </div>

            <button class="btn" onclick="agregarProducto()">â• Agregar Producto</button>
            <button class="btn btn-danger" onclick="limpiarProductos()">ğŸ—‘ï¸ Limpiar Todo</button>

            <div id="alertProductos"></div>

            <!-- GestiÃ³n de CategorÃ­as -->
            <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #28a745;">
                <h3 style="color: #28a745; margin-bottom: 20px;">ğŸ“ GestiÃ³n de CategorÃ­as</h3>
                
                <div class="form-row">
                    <div class="form-group" style="flex: 1;">
                        <label for="nuevaCategoria">Nueva CategorÃ­a:</label>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <input type="text" id="nuevaCategoria" placeholder="Nombre de la categorÃ­a" style="flex: 1;">
                            <input type="text" id="iconoCategoria" placeholder="ğŸ½ï¸" style="width: 60px; text-align: center;" maxlength="2">
                            <button class="btn" onclick="agregarCategoria()" style="background: #28a745; color: white;">â• Agregar</button>
                        </div>
                        <small style="color: #6c757d; margin-top: 5px; display: block;">Ingresa el nombre y opcionalmente un emoji para la categorÃ­a</small>
                    </div>
                </div>

                <div id="alertCategorias" style="margin: 15px 0;"></div>

                <div id="listaCategorias" style="margin-top: 20px;">
                    <!-- Las categorÃ­as se cargarÃ¡n aquÃ­ -->
                </div>
            </div>

            <div id="listaProductos" class="productos-grid">
                <!-- Los productos se cargarÃ¡n aquÃ­ -->
            </div>
        </div>

        <!-- TAB COTIZADOR -->
        <div id="cotizador" class="tab-content">
            <h2 id="tituloCotizador">Nueva CotizaciÃ³n</h2>
            
            <!-- Indicador de versiÃ³n cuando se estÃ¡ editando -->
            <div id="indicadorVersion" style="display: none; margin: 20px 0; padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 10px; text-align: center;">
                <h3 style="margin: 0; color: white;">âœï¸ Editando CotizaciÃ³n</h3>
                <p style="margin: 5px 0 0 0; font-size: 1.1rem;" id="nombreVersionEditando"></p>
            </div>

            <!-- Datos del Cliente -->
            <div class="categoria-section">
                <h3 class="categoria-title">ğŸ“‹ Datos del Cliente</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="nombreCliente">Nombre del Cliente:</label>
                        <input type="text" id="nombreCliente" placeholder="Nombre completo">
                    </div>
                    <div class="form-group">
                        <label for="fechaEvento">Fecha del Evento:</label>
                        <input type="datetime-local" id="fechaEvento">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="cantidadPersonas">Cantidad de Personas:</label>
                        <input type="number" id="cantidadPersonas" min="12" max="120" placeholder="12-55 sentados / 120 parados">
                    </div>
                    <div class="form-group">
                        <label for="formatoEvento">Formato:</label>
                        <select id="formatoEvento">
                            <option value="sentado">Sentado (mÃ¡x. 55)</option>
                            <option value="parado">Parado (mÃ¡x. 120)</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="estadoCotizacion">Estado de la CotizaciÃ³n:</label>
                        <select id="estadoCotizacion">
                            <!-- Los estados se cargarÃ¡n dinÃ¡micamente -->
                        </select>
                    </div>
                </div>
            </div>

            <!-- Motivo del Evento -->
            <div class="categoria-section">
                <h3 class="categoria-title">ğŸ‰ Motivo del Evento</h3>
                <div class="checkbox-group">
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="cumpleanos">
                        <label>ğŸ‚ CumpleaÃ±os</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Celebraciones personalizadas para homenajear a quien cumple aÃ±os.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="celebracion_especial">
                        <label>âœ¨ CelebraciÃ³n Especial</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Desde encuentros Ã­ntimos hasta fiestas sofisticadas.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="aniversarios">
                        <label>ğŸ’• Aniversarios y Bodas</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Momentos romÃ¡nticos para celebrar el amor.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="reunion_familiar">
                        <label>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Reuniones Familiares</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Encuentros intergeneracionales en un entorno cuidado.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="encuentro_amigos">
                        <label>ğŸ‘¥ Encuentro de Amigos</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">ReuniÃ³n distendida con formato relajado.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="corporativo">
                        <label>ğŸ¢ Evento Corporativo</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Para fomentar integraciÃ³n del equipo.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="team_building">
                        <label>ğŸ¤ Team Building</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Espacios de planificaciÃ³n y capacitaciÃ³n.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="motivo" value="comercial">
                        <label>ğŸ’¼ Evento Comercial</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">PresentaciÃ³n de productos o servicios.</p>
                    </div>
                </div>
            </div>

            <!-- Experiencias -->
            <div class="categoria-section">
                <h3 class="categoria-title">ğŸŒŸ Experiencias</h3>
                <div class="checkbox-group">
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="cena_almuerzo">
                        <label>ğŸ½ï¸ Cenas/Almuerzo</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">GastronomÃ­a de alta cocina con menÃºs de pasos.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="cena_maridada">
                        <label>ğŸ· Cenas Maridadas por Pasos</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Cada plato armonizado con vinos seleccionados.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="cata_vinos">
                        <label>ğŸ¾ Cata de Vinos</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">DegustaciÃ³n guiada de etiquetas seleccionadas.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="finger_food">
                        <label>ğŸ¥‚ Finger Food & Lounge</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Formato relajado para socializar con bocados gourmet.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="after_office">
                        <label>ğŸŒ† After Office</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Veladas con vinos boutique y DJ en vivo.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="cocteles">
                        <label>ğŸ¸ CÃ³cteles de Autor</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Barra abierta con cÃ³cteles preparados por bartenders.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="show_cooking">
                        <label>ğŸ‘¨â€ğŸ³ Show Cooking</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">Chef cocina en vivo frente a los invitados.</p>
                    </div>
                    <div class="checkbox-item" onclick="toggleCheckbox(this)">
                        <input type="checkbox" name="experiencia" value="brunch">
                        <label>ğŸ¥ Brunch</label>
                        <p style="font-size: 0.9rem; color: #6c757d; margin-top: 5px;">FusiÃ³n perfecta entre desayuno y almuerzo.</p>
                    </div>
                </div>
            </div>

            <!-- SelecciÃ³n de MenÃº -->
            <div class="categoria-section">
                <h3 class="categoria-title">ğŸ´ SelecciÃ³n de MenÃº</h3>
                <div id="menuSelector">
                    <!-- Se cargarÃ¡ dinÃ¡micamente segÃºn los productos -->
                </div>
            </div>

            <!-- ELIMINAR BOTONES DE GENERAR Y LIMPIAR YA QUE SERÃ AUTOMÃTICO -->
            <div style="text-align: center; margin: 20px 0;">
                <button class="btn" onclick="limpiarCotizacion()">ğŸ”„ Limpiar Formulario</button>
                <div style="margin-top: 10px; padding: 15px; background: #e3f2fd; border-radius: 10px; color: #1976d2; font-size: 0.9rem;">
                    <strong>âœ¨ ActualizaciÃ³n en Tiempo Real:</strong> El resumen se actualiza automÃ¡ticamente mientras completas los datos
                </div>
            </div>

            <!-- Resumen de CotizaciÃ³n -->
            <div id="resumenCotizacion" style="display: none;">
                <!-- Se generarÃ¡ dinÃ¡micamente en tiempo real -->
            </div>

            <div id="alertCotizacion"></div>
        </div>

        <!-- TAB HISTORIAL -->
        <div id="historial" class="tab-content">
            <h2>Historial de Cotizaciones</h2>
            
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <div style="display: flex; gap: 10px; align-items: center;">
                    <input type="text" id="buscarCotizacion" placeholder="Buscar por cliente..." style="width: 250px;">
                    <button class="btn" onclick="buscarCotizaciones()">ğŸ” Buscar</button>
                    <button class="btn" onclick="mostrarTodasCotizaciones()">ğŸ“‹ Mostrar Todas</button>
                </div>
                <div>
                    <button class="btn btn-success" onclick="exportarCotizaciones()">ğŸ“¤ Exportar Todo</button>
                    <button class="btn" onclick="exportarBaseDatos()">ğŸ’¾ Exportar BD</button>
                    <button class="btn" onclick="importarBaseDatos()">ğŸ“¥ Importar BD</button>
                    <button class="btn btn-danger" onclick="limpiarHistorial()">ğŸ—‘ï¸ Limpiar Historial</button>
                </div>
            </div>

            <div id="alertHistorial"></div>

            <div id="tablaCotizaciones">
                <!-- Se cargarÃ¡ dinÃ¡micamente -->
            </div>

            <!-- Historial de Versiones -->
            <div style="margin: 30px 0; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #28a745;">
                <h3 style="color: #28a745; margin-bottom: 20px;">ğŸ”„ Historial de Versiones</h3>
                
                <div style="margin-bottom: 20px; padding: 15px; background: #d1ecf1; border-radius: 8px; color: #0c5460;">
                    <strong>ğŸ’¡ Sistema de Versiones:</strong> Cada cambio que realizas guarda automÃ¡ticamente una nueva versiÃ³n con fecha y hora. Puedes comparar, restaurar o crear ramas desde cualquier versiÃ³n anterior.
                </div>

                <div id="alertVersiones" style="margin: 15px 0;"></div>

                <div id="historialVersiones" style="margin-top: 20px;">
                    <!-- El historial de versiones se cargarÃ¡ aquÃ­ -->
                </div>
            </div>

            <!-- GestiÃ³n de Estados -->
            <div style="margin: 30px 0; padding: 20px; background: #f8f9fa; border-radius: 10px; border-left: 4px solid #007bff;">
                <h3 style="color: #007bff; margin-bottom: 20px;">ğŸ“Š GestiÃ³n de Estados de CotizaciÃ³n</h3>
                
                <div class="form-row">
                    <div class="form-group" style="flex: 1;">
                        <label for="nuevoEstado">Nuevo Estado:</label>
                        <div style="display: flex; gap: 10px; align-items: end;">
                            <input type="text" id="nuevoEstado" placeholder="Nombre del estado" style="flex: 1;">
                            <input type="text" id="iconoEstado" placeholder="ğŸ“‹" style="width: 60px; text-align: center;" maxlength="2">
                            <input type="color" id="colorEstado" value="#6c757d" style="width: 60px; padding: 5px; border: 1px solid #ddd; border-radius: 4px;">
                            <button class="btn" onclick="agregarEstado()" style="background: #007bff; color: white;">â• Agregar</button>
                        </div>
                        <small style="color: #6c757d; margin-top: 5px; display: block;">Ingresa el nombre, emoji y color para el estado</small>
                    </div>
                </div>

                <div id="alertEstados" style="margin: 15px 0;"></div>

                <div id="listaEstados" style="margin-top: 20px;">
                    <!-- Los estados se cargarÃ¡n aquÃ­ -->
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>